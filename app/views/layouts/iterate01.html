<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="../../assets/stylesheets/contents.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>第1回 Actibu Ruby勉強会</h1>
    <p>2012/05/12 講師：<a href="https://github.com/akiinyo">akiinyo</a></p>
    <p>参考文献：<a href="http://www.amazon.co.jp/First-Rails-%E2%80%95%E9%A0%AD%E3%81%A8%E3%81%8B%E3%82%89%E3%81%A0%E3%81%A7%E8%A6%9A%E3%81%88%E3%82%8BRails%E3%81%AE%E5%9F%BA%E6%9C%AC-David-Griffiths/dp/4873114381">Head First Rails</a> 第1章</p>
    <p>書記：<a href="https://github.com/shimosuk">shimosuk</a></p>
    <h2>バージョン情報</h2>
    <p>下記のコマンドで自身のマシンのバージョンを確認する</p>
    <ul class='code'>
      <li>%ruby -v</li>
      <li>ruby 1.9.3</li>
      <li>%rails -v</li>
      <li>rails 3.2.3</li>
    </ul>
    <h2>アプリ作成の準備</h2>
    <p>アプリを入れるディレクトリrails_projectの作成して、アプリを準備</p>
    <p>今回作成するアプリの名前はtickets</p>
    <ul class='code'>
      <li>%mkdir rails_project</li>
      <li>%cd rails_project</li>
      <li>%rails new tickets</li>
    </ul>
    <h2>サーバの起動</h2>
    <ul class='code'>
      <li>%cd tickets</li>
      <li>%rails s</li>
    </ul>
    <p><span>rails s</span>は<span>rails script/server</span>でもOK</p>
    <p>デフォルトのポート番号は3000</p>
    <p>Webブラウザから<span>http://localhost:3000/</span>に接続し、サーバの起動を確認できる</p>
    <p>もし、ポート番号を違う値で設定したい場合は<span>rails s -p 5000</span>で指定可能</p>
    <p>後々、Webブラウザでの起動に使用する</p>

    <h2>ビュー・コントローラー・モデルの作成</h2>

    <p>ticketというモデルを作成し、nameやseat_id_seqなどのカラム設定を行う</p>
    <p>この時のticketが複数形になったticketsがテーブルとして生成され、localhostに接続する際の名前となる</p>
    <ul class='code'>
      <li>%rails g scaffold ticket name:string seat_id_seq:string address:text price_paid:decimal email_address:string</li>
    </ul>
    <p>scaffoldは、ビュー・コントローラ・モデルを一気に作成するコマンド</p>
    <p>設定したモデルに基づいたモデル、コントローラー、ビューが作成される</p>
    <p>※ 旧バージョンでは、<span>g</span>は<span>script/generate</span>と置き換えられる</p>

    <h2>データベースの作成</h2>
    <ul class='code'>
      <li>%rake db:migrate</li>
    </ul>
    <p><a href='http://webos-goodies.jp/archives/50727147.html'>rake</a>を使ってDBを作成している</p>
    
    <h2>アプリ起動</h2>
    <p>Webブラウザで<span>http://localhost:3000/tickets</span>で起動を確認</p>

    <p>もうちゃんと動くアプリなので実際に使って見る</p>

    <h2>おまけ:ビュー、コントローラー、モデル</h2>
    
    <h3>app</h3>
    <p>プロンプトを使用するなら、Macは<span>ls -la</span>で、Winは<span>dir</span>コマンドでapp/の直下の下記ディレクトリ構造に着目する</p>

    <ul class='code'>
      <li>views/</li>
      <li>controllers/</li>
      <li>modells/</li>
    </ul>
    <h3>modells/tickets.rb</h3>
    <p>空っぽを確認</p>
    <p>主にデータベースを操作するメソッドが入ってくる</p>
    <p>exp) カテゴリ分け機能とか</p>
    
    <h3>controllers/tickets_conroller.rb</h3>
    <p>メソッドを確認(Rubyのメソッド<span>def</span>と<span>end</span>に囲まれている)</p>
    <p>下記のようなメソッドが既に記入されている</p>
    <ul class='code'>
      <li>index 一覧</li>
      <li>new 新規作成</li>
      <li>show 詳細</li>
      <li>edit 編集</li>
      <li>update 更新</li>
      <li>destory 削除</li>
    </ul>
    
    <h3>views/*.html.erb</h3>
    
    <p>拡張子erbはHTMLファイルのなかにRubyのコードを書き込むためのもの</p>
    <p><span><%= hogehoge ></span>のように記述され、HTMLとして出力される際には、代入済みの値に置き換えられる</p>
  </body>
</html>
